<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Problem Brainstorm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Soft blues, indigos, and warm grays) -->
    <!-- Application Structure Plan: A dynamic grid of "problem" cards, representing memory challenges. Clicking a problem card expands it to reveal relevant "Mind Tool" and "Hand Tool" solution cards within its expanded area. This non-linear, explorative structure mimics a brainstorm, allowing users to intuitively navigate problems and discover their solutions without strict sequential flow, prioritizing user choice and synthesis. -->
    <!-- Visualization & Content Choices: Report Info: Lists of memory problems and memory tools, associated by category. Goal: Allow users to explore common memory challenges and find corresponding solutions interactively. Viz/Presentation: Problem cards (main interactive elements) trigger the display of nested solution cards. Tool cards within the expanded problem view are distinct, categorized, and concise. Interaction: Clickable problem cards toggle visibility of tool details. Justification: This design leverages visual discovery and direct interaction, making the abstract concepts of memory problems and tools tangible and immediately applicable to a middle school context. Library/Method: Vanilla JS for dynamic content creation and event handling. Unicode emojis for visual cues. CONFIRMATION: NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Tailwind slate-50 */
        }
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Soft shadow for floating effect */
        }
        .problem-card {
            background-color: #ffffff; /* White background */
            border: 1px solid #e2e8f0; /* Tailwind slate-200 */
            transition: all 0.3s ease-in-out;
            transform: translateY(0);
        }
        .problem-card:hover {
            transform: translateY(-5px); /* Slight lift on hover */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .tool-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .tool-content.expanded {
            max-height: 600px; /* Increased max-height for more content */
            overflow-y: auto; /* Add scrolling when content exceeds max-height */
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            z-index: 10;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .close:hover,
        .close:focus {
            color: #000;
            background-color: #f1f5f9;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(-50px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-7xl mx-auto relative">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-3">Memory Problem Brainstorm</h1>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto">Click on any memory challenge to reveal useful Mind Tools üß† and Hand Tools ‚úã that can help you overcome it!</p>
        </header>

        <!-- Control Buttons -->
        <div class="absolute top-4 right-4 flex gap-2">
            <button id="toggleAllBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full shadow-lg text-sm transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300">
                Expand All
            </button>
        </div>

        <div id="problem-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Problem cards will be dynamically inserted here -->
        </div>

        <!-- Design Your Memory Solution Section -->
        <section class="mt-12 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border-2 border-purple-200">
            <h3 class="text-2xl font-bold text-purple-800 mb-4 text-center">üéØ Design Your Memory Solution</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <h4 class="font-semibold text-purple-700">Reflection Questions:</h4>
                    <ul class="space-y-2 text-sm text-purple-600">
                        <li>‚Ä¢ Which memory problems affect you most often?</li>
                        <li>‚Ä¢ What patterns do you notice in the tools that work for you?</li>
                        <li>‚Ä¢ How could you combine 2-3 tools for a super-solution?</li>
                        <li>‚Ä¢ What physical object could you design to help with your biggest challenge?</li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h4 class="font-semibold text-purple-700">Design Challenge:</h4>
                    <p class="text-sm text-purple-600">Pick your top 3 memory problems and sketch a single object that could help with all of them. Consider:</p>
                    <ul class="space-y-1 text-xs text-purple-500">
                        <li>‚Ä¢ What materials would work best?</li>
                        <li>‚Ä¢ How would someone use it daily?</li>
                        <li>‚Ä¢ What would make it personal and meaningful?</li>
                        <li>‚Ä¢ How could it grow with the user over time?</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Modal for expanded card view -->
        <div id="cardModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" id="closeModal">&times;</button>
                    <div id="modalHeader"></div>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be inserted here -->
                </div>
            </div>
        </div>

    </div>

    <script>
        const data = {
            tools: {
                m1: { 
                    name: "Repeating Things", 
                    type: "mind", 
                    emoji: "üîÅ", 
                    description: "Repeat a 4-digit locker combo 5 times each morning.",
                    levels: {
                        beginner: "Say it out loud 5-10 times in a row",
                        intermediate: "Use spaced repetition - review after 1 hour, 1 day, 1 week",
                        advanced: "Add rhythm or movement while repeating"
                    }
                },
                m2: { 
                    name: "Songs & Rhymes", 
                    type: "mind", 
                    emoji: "üé∂", 
                    description: "Turn the periodic table into a rap song, or make math formulas rhyme.",
                    levels: {
                        beginner: "Use existing tunes like 'Twinkle Star' for new lyrics",
                        intermediate: "Create original rhythms and melodies",
                        advanced: "Compose multi-verse songs for complex topics"
                    }
                },
                m3: { 
                    name: "Acronyms & Acrostics", 
                    type: "mind", 
                    emoji: "üÖ∞Ô∏è", 
                    description: "SOHCAHTOA = 'Only Hippos Are Happy Over Apples' for trigonometry.",
                    levels: {
                        beginner: "Use provided acronyms like PEMDAS",
                        intermediate: "Create your own memorable phrases",
                        advanced: "Make nested acronyms for complex subjects"
                    }
                },
                m4: { 
                    name: "Visualization", 
                    type: "mind", 
                    emoji: "üëÅÔ∏è", 
                    description: "Picture a giant elephant wearing your math teacher's glasses to remember formulas.",
                    levels: {
                        beginner: "Create simple, funny mental images",
                        intermediate: "Add movement and interaction to images",
                        advanced: "Build complex visual narratives"
                    }
                },
                m5: { 
                    name: "Memory Palace", 
                    type: "mind", 
                    emoji: "üè∞", 
                    description: "Put your class schedule around your bedroom: Math on your desk, Science by the window, English on your dresser.",
                    levels: {
                        beginner: "Use your bedroom for 5-10 items",
                        intermediate: "Use your whole house for 20+ items",
                        advanced: "Create multiple palaces for different subjects"
                    }
                },
                m6: { 
                    name: "Chunking", 
                    type: "mind", 
                    emoji: "üì¶", 
                    description: "Group books by day: 'Monday Math English' instead of trying to remember 15 individual subjects.",
                    levels: {
                        beginner: "Break long numbers into 3-4 digit groups",
                        intermediate: "Group related concepts together",
                        advanced: "Create hierarchical chunking systems"
                    }
                },
                m7: { 
                    name: "Storytelling", 
                    type: "mind", 
                    emoji: "üìñ", 
                    description: "Turn your locker combo 15-23-8 into 'I was 15, got 23 presents, ate 8 slices of cake.'",
                    levels: {
                        beginner: "Create simple cause-and-effect stories",
                        intermediate: "Add characters and emotions",
                        advanced: "Build epic multi-chapter narratives"
                    }
                },
                m8: { 
                    name: "Association", 
                    type: "mind", 
                    emoji: "üîó", 
                    description: "Link 'Victoria' to Queen Victoria, or connect your phone charger to brushing teeth.",
                    levels: {
                        beginner: "Find obvious connections (name similarities)",
                        intermediate: "Create personal, meaningful links",
                        advanced: "Build association chains and networks"
                    }
                },
                h1: { name: "Calendars & Planners", type: "hand", emoji: "üóìÔ∏è", description: "Digital calendars that sync across devices and send location-based reminders." },
                h2: { name: "Notebooks & Journals", type: "hand", emoji: "üìì", description: "Bullet journaling combines multiple memory tools - rapid logging with symbols." },
                h3: { name: "Lists & Checklists", type: "hand", emoji: "üìù", description: "Apps that let you share grocery lists with family and check off items in real-time." },
                h4: { name: "Alarms & Reminders", type: "hand", emoji: "‚è∞", description: "Smart reminders that trigger based on time, location, or when you open apps." },
                h5: { name: "Sticky Notes", type: "hand", emoji: "üè∑Ô∏è", description: "Digital sticky notes on your computer desktop or phone lock screen." },
                h6: { name: "Maps", type: "hand", emoji: "üó∫Ô∏è", description: "GPS apps that remember where you parked and give turn-by-turn directions." },
                h7: { name: "Photos & Videos", type: "hand", emoji: "üì∏", description: "Voice memos attached to photos, or time-lapse videos of your study process." },
                h8: { name: "Physical Triggers", type: "hand", emoji: "üéóÔ∏è", description: "Rubber band on wrist, special keychain, or object placed in unusual location." },
                h9: { name: "Filing Systems", type: "hand", emoji: "üóÉÔ∏è", description: "Cloud storage folders organized by subject, with consistent naming conventions." }
            },
            problems: [
                { id: "p1", text: "Class Timetable", category: "academic", tools: ["h1", "h2", "h5", "m5", "m2"], hmw: "How might we create a visual system that makes schedule changes instantly obvious?" },
                { id: "p2", text: "Books to Bring", category: "academic", tools: ["h3", "h5", "h2", "m6", "m8"], hmw: "How might we connect each subject to a memorable visual or physical cue?" },
                { id: "p3", text: "Locker Combinations", category: "academic", tools: ["m1", "h8", "h2", "m2", "m7"], hmw: "How might we transform numbers into something more meaningful and memorable?" },
                { id: "p4", text: "Homework Due Dates", category: "academic", tools: ["h1", "h3", "h5", "m8", "m6"], hmw: "How might we make deadlines feel urgent without causing stress?" },
                { id: "p5", text: "Turn in Homework", category: "academic", tools: ["h1", "h5", "h8", "m1"], hmw: "How might we create a routine that makes submission automatic?" },
                { id: "p6", text: "Study for a Test", category: "academic", tools: ["h1", "h3", "m6", "m5"], hmw: "How might we break study sessions into motivating, manageable chunks?" },
                { id: "p7", text: "History Dates & Names", category: "academic", tools: ["m3", "m7", "h2", "m2", "m6"], hmw: "How might we connect historical events to things students already care about?" },
                { id: "p8", text: "Scientific Vocabulary", category: "academic", tools: ["m1", "m4", "h2", "m2", "m7"], hmw: "How might we make scientific terms feel like familiar friends rather than strangers?" },
                { id: "p9", text: "Foreign Language List", category: "academic", tools: ["m1", "m2", "h2", "m6", "m8"], hmw: "How might we immerse ourselves in the language throughout the day?" },
                { id: "p10", text: "Complex Formulas", category: "academic", tools: ["m1", "m2", "h2", "m8", "m7"], hmw: "How might we turn abstract math into concrete, visual experiences?" },
                { id: "p11", text: "Lines for School Play", category: "academic", tools: ["m1", "m7", "h2", "m4", "m6"], hmw: "How might we embody the character so completely that lines feel natural?" },
                { id: "p12", text: "Password", category: "academic", tools: ["h2", "h8", "m3", "m7", "m2"], hmw: "How might we create passwords that are both secure and unforgettable?" },
                { id: "p13", text: "Friends' Birthdays", category: "personal", tools: ["h1", "h4", "m2", "m8"], hmw: "How might we show friends we care without relying on social media reminders?" },
                { id: "p14", text: "Text a Friend Back", category: "personal", tools: ["h4", "h5", "h8", "m8"], hmw: "How might we respond thoughtfully without seeming rude or forgetful?" },
                { id: "p15", text: "Names of New People", category: "personal", tools: ["m8", "m1", "m2", "m7"], hmw: "How might we make name-learning feel natural rather than awkward?" },
                { id: "p16", text: "Charge Your Phone", category: "personal", tools: ["h4", "h8", "m8", "m2"], hmw: "How might we build charging into our natural daily rhythm?" },
                { id: "p17", text: "Do Chores", category: "personal", tools: ["h1", "h3", "h4", "m6", "m8"], hmw: "How might we make household tasks feel rewarding rather than burdensome?" },
                { id: "p18", text: "Pack Sports Gear", category: "personal", tools: ["h3", "h1", "h8", "m6", "m5"], hmw: "How might we prepare for activities while half-asleep or rushed?" },
                { id: "p19", text: "Keys/Phone Location", category: "personal", tools: ["h8", "m5", "m8"], hmw: "How might we create designated homes for important items?" },
                { id: "p20", text: "Feed a Pet", category: "personal", tools: ["h4", "h3", "m2", "m8"], hmw: "How might we ensure our pets are cared for even when routines change?" },
                { id: "p21", text: "Take Medicine", category: "personal", tools: ["h4", "h1", "h8", "m2"], hmw: "How might we make health routines consistent and safe?" },
                { id: "p22", text: "Special Memory", category: "personal", tools: ["h2", "h7", "m8", "m7"], hmw: "How might we preserve meaningful moments in ways that bring joy later?" }
            ]
        };

        const problemsContainer = document.getElementById('problem-cards-container');
        const toggleAllBtn = document.getElementById('toggleAllBtn');
        const modal = document.getElementById('cardModal');
        const modalHeader = document.getElementById('modalHeader');
        const modalBody = document.getElementById('modalBody');
        const closeModal = document.getElementById('closeModal');

        let allExpanded = false; // Track the current state of all cards

        // Modal functions
        function openModal(problem) {
            const tagColorClass = problem.category === 'academic' ? 'bg-blue-100 text-blue-700' : 'bg-pink-100 text-pink-700';
            
            modalHeader.innerHTML = `
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                            <h2 class="text-2xl font-bold text-slate-800">${problem.text}</h2>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${tagColorClass} uppercase">
                                ${problem.category}
                            </span>
                        </div>
                        <div class="p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                            <h4 class="text-sm font-semibold text-yellow-800 mb-1">ü§î Design Challenge</h4>
                            <p class="text-sm text-yellow-700 italic">${problem.hmw}</p>
                        </div>
                    </div>
                </div>
            `;
            
            const associatedMindTools = problem.tools.map(tid => data.tools[tid]).filter(t => t.type === 'mind');
            const associatedHandTools = problem.tools.map(tid => data.tools[tid]).filter(t => t.type === 'hand');
            
            let mindToolsHTML = '';
            associatedMindTools.forEach(tool => {
                mindToolsHTML += `
                    <div class="bg-blue-100 p-4 rounded-lg mb-3">
                        <div class="flex items-center gap-3 mb-3">
                            <span class="text-2xl">${tool.emoji}</span>
                            <div class="flex-1">
                                <p class="font-semibold text-blue-800 text-lg">${tool.name}</p>
                                <p class="text-sm text-blue-700">${tool.description}</p>
                            </div>
                        </div>
                        ${tool.levels ? `
                        <div class="mt-3 space-y-2">
                            <div class="bg-green-50 p-3 rounded text-sm border-l-2 border-green-400">
                                <strong class="text-green-700">Beginner:</strong> <span class="text-green-600">${tool.levels.beginner}</span>
                            </div>
                            <div class="bg-yellow-50 p-3 rounded text-sm border-l-2 border-yellow-400">
                                <strong class="text-yellow-700">Intermediate:</strong> <span class="text-yellow-600">${tool.levels.intermediate}</span>
                            </div>
                            <div class="bg-red-50 p-3 rounded text-sm border-l-2 border-red-400">
                                <strong class="text-red-700">Advanced:</strong> <span class="text-red-600">${tool.levels.advanced}</span>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            let handToolsHTML = '';
            associatedHandTools.forEach(tool => {
                handToolsHTML += `
                    <div class="bg-indigo-100 p-4 rounded-lg mb-3 flex items-center gap-3">
                        <span class="text-2xl">${tool.emoji}</span>
                        <div>
                            <p class="font-semibold text-indigo-800 text-lg">${tool.name}</p>
                            <p class="text-sm text-indigo-700">${tool.description}</p>
                        </div>
                    </div>
                `;
            });
            
            modalBody.innerHTML = `
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-blue-600 mb-4 flex items-center gap-2">
                            üß† Mind Tools
                        </h3>
                        ${mindToolsHTML}
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-indigo-600 mb-4 flex items-center gap-2">
                            ‚úã Hand Tools
                        </h3>
                        ${handToolsHTML}
                    </div>
                </div>
            `;
            
            modal.classList.add('show');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeModalFunction() {
            modal.classList.remove('show');
            document.body.style.overflow = 'auto'; // Restore background scrolling
        }

        // Event listeners for modal
        closeModal.addEventListener('click', closeModalFunction);
        
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModalFunction();
            }
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.classList.contains('show')) {
                closeModalFunction();
            }
        });

        function renderProblemCards() {
            problemsContainer.innerHTML = '';
            data.problems.forEach(problem => {
                const card = document.createElement('div');
                card.className = `problem-card p-6 rounded-2xl cursor-pointer card-shadow relative`;

                let tagColorClass = '';
                if (problem.category === 'academic') {
                    tagColorClass = 'bg-blue-100 text-blue-700'; // Lighter background, darker text
                } else if (problem.category === 'personal') {
                    tagColorClass = 'bg-pink-100 text-pink-700'; // Lighter background, darker text
                }

                card.innerHTML = `
                    <div class="absolute top-3 right-3 px-1.5 py-0.5 rounded-full text-xs font-medium ${tagColorClass} uppercase">
                        ${problem.category}
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">${problem.text}</h3>
                    <div class="tool-content">
                        <div class="mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                            <h4 class="text-sm font-semibold text-yellow-800 mb-1">ü§î Design Challenge</h4>
                            <p class="text-sm text-yellow-700 italic">${problem.hmw}</p>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-lg font-semibold text-blue-600 mb-2">üß† Mind Tools</h4>
                            <div class="grid grid-cols-1 gap-2" id="mind-tools-${problem.id}"></div>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-indigo-600 mb-2">‚úã Hand Tools</h4>
                            <div class="grid grid-cols-1 gap-2" id="hand-tools-${problem.id}"></div>
                        </div>
                    </div>
                `;
                problemsContainer.appendChild(card);

                const toolContentDiv = card.querySelector('.tool-content');
                const mindToolsGrid = card.querySelector(`#mind-tools-${problem.id}`);
                const handToolsGrid = card.querySelector(`#hand-tools-${problem.id}`);

                const associatedMindTools = problem.tools.map(tid => data.tools[tid]).filter(t => t.type === 'mind');
                const associatedHandTools = problem.tools.map(tid => data.tools[tid]).filter(t => t.type === 'hand');

                associatedMindTools.forEach(tool => {
                    mindToolsGrid.innerHTML += `
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xl">${tool.emoji}</span>
                                <div class="flex-1">
                                    <p class="font-semibold text-blue-800">${tool.name}</p>
                                    <p class="text-xs text-blue-700">${tool.description}</p>
                                </div>
                            </div>
                            ${tool.levels ? `
                            <div class="mt-2 space-y-1">
                                <div class="bg-green-50 p-2 rounded text-xs border-l-2 border-green-400">
                                    <strong class="text-green-700">Beginner:</strong> <span class="text-green-600">${tool.levels.beginner}</span>
                                </div>
                                <div class="bg-yellow-50 p-2 rounded text-xs border-l-2 border-yellow-400">
                                    <strong class="text-yellow-700">Intermediate:</strong> <span class="text-yellow-600">${tool.levels.intermediate}</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded text-xs border-l-2 border-red-400">
                                    <strong class="text-red-700">Advanced:</strong> <span class="text-red-600">${tool.levels.advanced}</span>
                                </div>
                            </div>
                            ` : ''}
                        </div>
                    `;
                });

                associatedHandTools.forEach(tool => {
                    handToolsGrid.innerHTML += `
                        <div class="bg-indigo-100 p-3 rounded-lg flex items-center gap-2">
                            <span class="text-xl">${tool.emoji}</span>
                            <div>
                                <p class="font-semibold text-indigo-800">${tool.name}</p>
                                <p class="text-xs text-indigo-700">${tool.description}</p>
                            </div>
                        </div>
                    `;
                });

                card.addEventListener('click', () => {
                    openModal(problem);
                });
            });
        }

        function toggleAllCards(expand) {
            const toolContentDivs = document.querySelectorAll('.tool-content');
            toolContentDivs.forEach(div => {
                if (expand) {
                    div.classList.add('expanded');
                } else {
                    div.classList.remove('expanded');
                }
            });
            allExpanded = expand; // Update the global state
            updateToggleButtonText();
        }

        function updateToggleButtonText() {
            if (allExpanded) {
                toggleAllBtn.textContent = 'Contract All';
                toggleAllBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600', 'focus:ring-blue-300');
                toggleAllBtn.classList.add('bg-red-500', 'hover:bg-red-600', 'focus:ring-red-300');
            } else {
                toggleAllBtn.textContent = 'Expand All';
                toggleAllBtn.classList.remove('bg-red-500', 'hover:bg-red-600', 'focus:ring-red-300');
                toggleAllBtn.classList.add('bg-blue-500', 'hover:bg-blue-600', 'focus:ring-blue-300');
            }
        }

        toggleAllBtn.addEventListener('click', () => {
            toggleAllCards(!allExpanded); // Toggle the state
        });

        renderProblemCards();
        updateToggleButtonText(); // Set initial button text
    </script>
</body>
</html>